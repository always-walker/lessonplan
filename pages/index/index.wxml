<tabbar index="1" back="0"></tabbar>
<block wx:if="{{isInfo}}">
  <view class="topbar">
    <view class="hanlder-item" style="margin-left:20px;" bindtap="searchClass">
      <image mode="widthFix" src="/images/tijiao.svg"></image>
      <text>输入邀请码</text>
    </view>
    <navigator wx:if="{{hasClass}}" open-type="navigate" url="/pages/names/list?classId={{currentClassGuid}}&className={{currentClassName}}" class="choose-class">
      <text>{{currentClassName}}</text>
      <image mode="widthFix" src="/images/down.svg"></image>
    </navigator>
    <view wx:if="{{hasClass == false}}" class="choose-class">
      <text>无班级</text>
    </view>
    <view class="hanlder-item refresh" style="margin-right:20px;" bindtap="getClass">
      <image mode="widthFix" src="/images/refresh.svg"></image>
      <text>刷新列表</text>
    </view>
  </view>

  <block wx:if="{{hasClass && courseType == 1 && courseList.length > 0}}">
    <view style="height:51px;"></view>
    <view class="courseTitle">
      <text>课堂：</text>
    </view>
    <view wx:for="{{courseList}}" wx:key="PK_MyCoursewareGuid" wx:for-index="count" wx:for-item="row" class="app" wx:if="{{hasClass}}">
      <view class="app_title">
        <text class="app_title_name">{{row.Title}}</text>
        <text class="app_title_status">{{row.records.length}}个推送</text>
      </view>
      <view class="app_list">
        <view class="app_item" wx:for="{{row.records}}" wx:key="Guid" data-count="{{count}}" data-index="{{index}}" bindtap="goApp">
          <view class="app_item_icon" style="background-color: {{item.Style.labelColor}};"></view>
          <view class="app_item_content" style="background-color: {{item.Style.bgColor}};">
            <text class="app_item_time">{{item.CreateTime}}</text>
            <text class="app_item_title">{{item.itemName}}</text>
          </view>
        </view>
      </view>
    </view>
    <view style="height: 100px;"></view>
    <view class="course2">
      <view class="course-btn" bindtap="courseOut">
        <text>课下</text>
        <view>
          <text>{{pushCount2}}个推送</text>
          <text wx:if="{{weCourseList.length > 0}}">{{weCourseList.length}}个微课</text>
          <image mode="widthFix" src="/images/down-white.svg"></image>
        </view>
      </view>
    </view>
  </block>

  <block wx:if="{{hasClass && (courseList2.length > 0 || weCourseList.length > 0) && (courseType == 2 || courseList2.length == 0)}}">
    <view style="height:90px;"></view>
    <view class="course1">
      <view class="course-btn" bindtap="courseOn">
        <text>课堂</text>
        <view>
          <text>{{pushCount}}个推送</text>
          <image mode="widthFix" src="/images/down-white.svg"></image>
        </view>
      </view>
    </view>
    <view class="courseTitle">
      <text>课下：</text>
    </view>
    <view class="app" wx:if="{{weCourseList.length > 0}}">
      <view class="app_title">
        <text class="app_title_name">微课</text>
        <text class="app_title_status">{{weCourseList.length}}个微课</text>
      </view>
      <view class="app_list">
        <view class="app_item_course" wx:for="{{weCourseList}}" wx:key="PK_MyMicroLessonGuid" data-index="{{index}}" bindtap="goVideo">
          <image mode="widthFix" src="https://img.lessonplan.cn{{item.Cover}}"></image>
          <text>{{item.Title}}</text>
        </view>
      </view>
    </view>
    <view wx:for="{{courseList2}}" wx:key="PK_MyCoursewareGuid" wx:for-index="count" wx:for-item="row" class="app" wx:if="{{hasClass}}">
      <view class="app_title">
        <text class="app_title_name">{{row.Title}}</text>
        <text class="app_title_status">{{row.records.length}}个推送</text>
      </view>
      <view class="app_list">
        <view class="app_item" wx:for="{{row.records}}" wx:key="Guid" data-count="{{count}}" data-index="{{index}}" bindtap="goApp">
          <view class="app_item_icon" style="background-color: {{item.Style.labelColor}};"></view>
          <view class="app_item_content" style="background-color: {{item.Style.bgColor}};">
            <text class="app_item_time">{{item.CreateTime}}</text>
            <text class="app_item_title">{{item.itemName}}</text>
          </view>
        </view>
      </view>
    </view>
    <view style="height: 60px;"></view>
  </block>

  <view wx:if="{{hasClass && courseList.length == 0 && courseList2.length == 0 && weCourseList.length == 0}}" class="no-push">
    <image mode="widthFix" src="/images/no-content.svg"></image>
    <text>本班级还未推送任何内容</text>
  </view>

  <view wx:if="{{hasClass == false}}" class="notice">
    <text class="notice-red">您尚未加入任何班级</text>
    <text>1 获取班级邀请码</text>
    <text>2 点击顶部“输入邀请码快速开始”</text>
    <text>3 输入班级邀请码并确定</text>
    <text>4 加入班级</text>
  </view>

  <form bindsubmit="joinClass" wx:if="{{condition}}">
    <view class="class-search">
      <view class="close">
        <image bindtap="closeSearchClass" mode="widthFix" src="/images/close.svg"></image>
      </view>
      <view class="search-content">
        <input name="Code" type="text" placeholder="输入邀请码快速开始"></input>
        <button form-type="submit">确定</button>
      </view>
    </view>
  </form>
</block>
<view wx:if="{{isInfo == false}}" class="noInfo">
  <image mode="widthFix" style="width:60%;" src="https://cdn.lessonplan.cn/LessonPlay/MobileLessonPlay/IMG/warning.jpg"></image>
  <view class="noinfo-tip">
    <text>(●°u°●)​ 您的资料还未填完</text>
    <text>请前往个人资料中进行完善</text>
  </view>
  <view class="noinfo-tap">
    <navigator url="/pages/my/basic">完善信息</navigator>
    <text bindtap="redirectIn">直接进入任务清单</text>
  </view>
</view>